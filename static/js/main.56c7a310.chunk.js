(this.webpackJsonpEasy_Listening=this.webpackJsonpEasy_Listening||[]).push([[0],{22:function(e,t,a){e.exports=a(49)},27:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(13),i=a.n(r),l=(a(27),a(3)),o=a.n(l),u=a(14),c=a(15),h=a(16),p=a(17),d=a(20),m=a(18),v=a(2),g=a(21);var f,w=function(e){for(var t,a,s=e.length;s>0;)a=Math.floor(Math.random()*s),t=e[--s],e[s]=e[a],e[a]=t;return e},b=(a(29),a(30),a(19)),k=a.n(b),y=(a(48),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleKeyPress=function(e,t){var s=a.state.isEnd;"Space"===e.key?a.playAudio(t):"ArrowLeft"!==e.key||s?"ArrowRight"!==e.key||s||(f.currentTime=f.currentTime+3<f._startTime+f.duration?f.currentTime+=3:f.currentTime):f.currentTime=f.currentTime-3>f._startTime?f.currentTime-3:f._startTime},a.state={english_text:"",vietnames_text:"",final_text:[],guessWord:"",checkAnswer:[],createAnswer:[],key:0,index:0,storeIndex:"",countGuess:0,bool:!1,english:"",vietnames:"",submit:!0,value:"default",voice:"US English Male",valueInput:"",inputArr:[],urlDownLoad:"",urlYouTuBe:"",captions:[],duration:"",audioElement:"",starts:[],durations:[],count:0,results:[],isPlayArr:[],prevKey:-1,isEnd:!1,defaultsYoutubeUrl:["https://www.youtube.com/watch?v","https://youtu.be/","https://m.youtube.com/watch?feature=youtu.be&v=","https://www.youtube.com/watch?feature=youtu.be&v="]},a.handleGuessButtons=a.handleGuessButtons.bind(Object(v.a)(a)),a.handleGuessBox=a.handleGuessBox.bind(Object(v.a)(a)),a.handleOtherButton=a.handleOtherButton.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.showAnswers=a.showAnswers.bind(Object(v.a)(a)),a.handleSelectChange=a.handleSelectChange.bind(Object(v.a)(a)),a.playAudio=a.playAudio.bind(Object(v.a)(a)),a.showButtons=a.showButtons.bind(Object(v.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=document.createElement("script");e.src="https://code.responsivevoice.org/responsivevoice.js?key=FdquDWj4",e.async=!0,document.body.appendChild(e)}},{key:"showButtons",value:function(){var e=this;if(0===this.state.captions.length&&this.state.urlYouTuBe.length>0){for(var t=this.state.urlYouTuBe,a="",s=0;s<this.state.defaultsYoutubeUrl.length;s++)if(!t.indexOf(this.state.defaultsYoutubeUrl[s]))switch(s){case 0:a=t.split("=")[1].split("&")[0];break;case 1:a=t.split("/")[3].slice(0,11);break;case 2:a=t.split("=")[2];break;case 3:a=t.split("&")[1].split("=")[1]}var n=[],r=[],i=[];new Promise((function(e){var t=new XMLHttpRequest,s="https://video.google.com/timedtext?&lang=en&v="+a;t.open("GET",s,!0),t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE){var e=t.status;(0===e||e>=200&&e<400)&&console.log("OK")}},t.onload=function(a){e(t.responseText)},t.onerror=function(){e(void 0),console.error("** An error occurred during the XMLHttpRequest")},t.send(null)})).then((function(t){var a=t.replace(new RegExp("&#39;","g"),"'").replace(new RegExp("&amp;#39;","g"),"'").replace(new RegExp("&amp;amp;","g"),"and").split("<transcript>")[1].split("</text>");a.pop();for(var s=0;s<a.length;s++){var l=a[s].split(">"),o=l[0].split(" "),u=o[1].split("=")[1],c=o[2].split("=")[1];n.push(l[1].replace(new RegExp('[&/\\#,+()$~%.":*?<>{}]',"g"),"")),r.push(+u.replace(new RegExp('"',"g"),"")),i.push(+c.replace(new RegExp('"',"g"),""))}var h=n.length,p=[];if(h%2===0)for(var d=0;d<h;d+=2)p.push(n[d]+" "+n[d+1]);else{for(var m=0;m<h-1;m+=2)p.push(n[m]+" "+n[m+1]);p.push(n[h-1])}for(var v=[],g=[],f=[],b=[],k=[],y=[],x=[],E=0;E<p.length;E++){var A=[];k.push(p[E].split(" ")),y.push(p[E].split(" ")),g.push(!0),f.push(0),x.push(!0),b.push(0);for(var _=0;_<p[E].split(" ").length;_++)A.push("___");v.push(A)}y.forEach((function(e){return w(e)})),e.setState({captions:n,starts:r,durations:i,results:p,final_text:y,createAnswer:v,inputArr:g,storeIndex:f,show:b,checkAnswer:k,isPlayArr:x})}))}}},{key:"handleGuessBox",value:function(e){e!==this.state.key&&this.setState((function(t){return{key:e,index:0,countGuess:0}}))}},{key:"handleOtherButton",value:function(e){var t=e.target.value;"___"!==t&&window.responsiveVoice.speak(t,this.state.voice)}},{key:"handleGuessButtons",value:function(e){var t,a=this;try{t=e.target.value}catch(h){t=e}console.log(t);var s=this.state.key,n=this.state.storeIndex,r=n[s],i=this.state.countGuess;i<1&&window.responsiveVoice.speak(t,this.state.voice);var l=this.state.final_text.slice(0,this.state.final_text.length);if(this.state.checkAnswer[s][r].replace(",","").toLowerCase()===t.replace(",","").toLowerCase()){var o=this.state.createAnswer.slice(0,this.state.createAnswer.length);l[s].splice(l[s].indexOf(this.state.checkAnswer[s][r]),1),1!==i&&this.state.bool,o[s][r]=this.state.checkAnswer[s][r];var u=n.slice(0,n.length);u[s]=r+1,this.setState((function(e){return{createAnswer:o,index:r+1,guessWord:a.state.checkAnswer[s][r],final_text:l,storeIndex:u,countGuess:0,bool:!1,valueInput:""}})),r+1===this.state.checkAnswer[s].length&&this.setState((function(e){return{index:0}}))}else{if((i+=1)>=2){var c="The next word is ".concat(this.state.checkAnswer[s][r]);window.responsiveVoice.speak(c,this.state.voice),this.setState((function(e){return{valueInput:""}}))}this.setState((function(e){return{guessWord:a.state.checkAnswer[s][r],countGuess:i,bool:!0}}))}}},{key:"handleReadText",value:function(e){0===this.state.final_text[e].length&&window.responsiveVoice.speak(this.state.english_text[e],this.state.voice)}},{key:"playAudio",value:function(e){try{var t,a,s=this.state,n=s.starts,r=s.durations,i=s.results,l=s.isPlayArr,o=s.prevKey,u=s.isEnd;e===i.length-1?(t=n[2*e],a=i.length%2!==0?r[2*e]+r[2*e+1]+1:r[2*e]+1,console.log("start",parseInt(t/60)+t%60/100,"duration",a)):(t=n[2*e],a=n[2*e+2]-n[2*e]-.15,console.log("start",parseInt(t/60)+t%60/100,"duration",a));var c=l.slice(0,l.length);if(console.log("Text: ",i[e]),e!==o&&-1!==o&&(c[o]||(c[o]=!c[o]),f.pause()),!l[e])try{f.pause()}catch(p){console.log("Don't Worry")}if(c[e]=!c[e],o!==e&&l[e]||!0===u){try{f.pause()}catch(p){}(f=document.createElement("video")).setAttribute("src",this.state.urlDownLoad),f.value=a,f._startTime=t,f.currentTime=t}!0===u&&(u=!1);var h=this;f.addEventListener("timeupdate",(function(){if(f.currentTime-f._startTime>=f.value&&(f.pause(),u=!0),u){var e=l.map((function(e){return!0}));h.setState({isPlayArr:e,isEnd:u})}})),l[e]&&f.play(),this.setState({isPlayArr:c,prevKey:e,isEnd:u})}catch(p){}}},{key:"generateButtons",value:function(){var e=this;return this.state.final_text.map((function(t,a){return n.a.createElement("section",{className:"Container",key:a,value:a,onMouseEnter:function(){return e.handleGuessBox(a)}},e.state.createAnswer[a].map((function(t,a){return n.a.createElement("button",{className:"Button",key:a,value:t,onClick:e.handleOtherButton},t)})),e.state.final_text[a].length>0?n.a.createElement("div",null,n.a.createElement("input",{type:"text",name:"valueInput",placeholder:"Typing Answer",value:e.state.key===a?e.state.valueInput:"",onChange:function(t){return e.handleChange(t,a)},style:{borderRadius:"5px",height:"30px",width:"200px",fontSize:"20px"}})):n.a.createElement("p",null),t.map((function(t,a){return n.a.createElement("button",{className:"Button",key:a,value:t,onClick:e.handleGuessButtons},t)})),n.a.createElement("div",null,n.a.createElement("button",{className:"Button",key:a,onClick:function(){return e.playAudio(a)},ref:"play",onKeyUp:function(t){return e.handleKeyPress(t,a)}},e.state.isPlayArr[a]?"Play":"Pause")),0===e.state.final_text[a].length?n.a.createElement("div",null,n.a.createElement("audio",{src:"https://media.vocaroo.com/mp3/9EciEJW3Cyt",autoPlay:!0,controls:!0,hidden:!0}),n.a.createElement("h1",{id:"meo"},e.state.results[a])):n.a.createElement("div",null,n.a.createElement("button",{className:"Button",style:{background:"#2c3e50",border:"none",color:"#e2e5e9"},key:a,onClick:function(){return e.showAnswers(a)}},"Show Answer")))}))}},{key:"handleChange",value:function(e,t){var a=this.state.index,s=this.state.checkAnswer,n=this.state.inputArr,r=n.slice(0,n.length),i=this.state.final_text;this.setState(Object(c.a)({},e.target.name,e.target.value),(function(){try{if(s.length>0){var e=i[t].map((function(e){return e.replace(",","").toLowerCase()}));if("meowmeow"===this.state.valueInput&&(window.responsiveVoice.speak("You say meowmeow",this.state.voice),0===this.state.final_text[t].length?this.setState({valueInput:"",index:a+1}):(this.handleGuessButtons(s[t][a]),this.setState({valueInput:""}))),this.state.valueInput.trim().toLowerCase()===s[t][a].toLowerCase()&&0===this.state.final_text[t].length){if(window.responsiveVoice.speak(this.state.valueInput,this.state.voice),a===s[t].length-1)new Audio("https://media.vocaroo.com/mp3/9EciEJW3Cyt").play(),console.log("Yes"),r[t]=!1;this.setState({valueInput:"",index:a+1,inputArr:r})}else e.includes(this.state.valueInput.trim().toLowerCase())&&" "===this.state.valueInput[this.state.valueInput.length-1]&&this.handleGuessButtons(this.state.valueInput.trim().toLowerCase())}}catch(n){console.log("Some Wrrong!")}}))}},{key:"handleSelectChange",value:function(e){var t=e.target.value,a=this.state.voice,s=this.state.final_text.slice(0,this.state.final_text.length),n=this.state.createAnswer.slice(0,this.state.createAnswer.length);switch(t){case"showanswer":for(var r=0;r<s.length;r++)s[r]=[],n[r]=this.state.checkAnswer[r];break;case"showbutton":0===this.state.captions.length&&this.showButtons();break;case"usmale":a="US English Male";break;case"usfemale":a="US English Female";break;case"ukmale":a="UK English Male";break;case"ukfemale":a="UK English Female"}this.setState({value:t,final_text:s,createAnswer:n,voice:a})}},{key:"showAnswers",value:function(e){var t=this.state.final_text.slice(0,this.state.final_text.length),a=this.state.createAnswer.slice(0,this.state.createAnswer.length);t[e]=[],a[e]=this.state.checkAnswer[e],this.setState((function(e){return{final_text:t,createAnswer:a}}))}},{key:"handleSubmit",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,s,n,r,i,l,u,c,h,p,d,m,v,g,f,b,y,x,E,A,_,S,B,C,T,O,I,L,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.urlYouTuBe.split("/"),s=this.state.urlDownLoad,!(a.length>0&&s.length>0)){e.next=49;break}if(!(0===this.state.captions.length&&this.state.urlYouTuBe.length>0)){e.next=49;break}a=this.state.urlYouTuBe,n="",r=0;case 8:if(!(r<this.state.defaultsYoutubeUrl.length)){e.next=24;break}if(a.indexOf(this.state.defaultsYoutubeUrl[r])){e.next=21;break}e.t0=r,e.next=0===e.t0?13:1===e.t0?15:2===e.t0?17:3===e.t0?19:20;break;case 13:return n=a.split("=")[1].split("&")[0],e.abrupt("break",21);case 15:return n=a.split("/")[3].slice(0,11),e.abrupt("break",21);case 17:return n=a.split("=")[2],e.abrupt("break",21);case 19:n=a.split("&")[1].split("=")[1];case 20:return e.abrupt("break",21);case 21:r++,e.next=8;break;case 24:return console.log(n),i=[],l=[],u=[],e.next=30,k.a.get("https://video.google.com/timedtext?&lang=en&v="+n);case 30:for(c=e.sent,h=c.data.replace(new RegExp("&#39;","g"),"'").replace(new RegExp("&amp;#39;","g"),"'").replace(new RegExp("&amp;amp;","g"),"and").split("<transcript>"),p=h[1].split("</text>"),console.log(p),p.pop(),d=0;d<p.length;d++)m=p[d].split(">"),v=m[0].split(" "),g=v[1].split("=")[1],f=v[2].split("=")[1],i.push(m[1].replace(new RegExp('[&/\\#,+()$~%.":*?<>{}]',"g"),"")),l.push(+g.replace(new RegExp('"',"g"),"")),u.push(+f.replace(new RegExp('"',"g"),""));if(b=i.length,y=[],b%2===0)for(x=0;x<b;x+=2)y.push(i[x]+" "+i[x+1]);else{for(E=0;E<b-1;E+=2)y.push(i[E]+" "+i[E+1]);y.push(i[b-1])}for(A=[],_=[],S=[],B=[],C=[],T=[],O=[],I=0;I<y.length;I++){for(L=[],C.push(y[I].split(" ")),T.push(y[I].split(" ")),_.push(!0),S.push(0),O.push(!0),B.push(0),j=0;j<y[I].split(" ").length;j++)L.push("___");A.push(L)}T.forEach((function(e){return w(e)})),this.setState({captions:i,starts:l,durations:u,results:y,final_text:T,createAnswer:A,inputArr:_,storeIndex:S,show:B,checkAnswer:C,isPlayArr:O,submit:!1});case 49:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.generateButtons();return this.state.guessWord===this.state.english_text[this.state.key]&&console.log("Your answer is correct"),n.a.createElement("div",{className:"App"},this.state.submit?n.a.createElement("form",{onSubmit:this.handleSubmit,id:"form"},n.a.createElement("label",null,n.a.createElement("input",{type:"text",name:"urlDownLoad",placeholder:"LinkDownLoad",value:this.state.urlDownLoad,onChange:this.handleChange})),n.a.createElement("label",null,n.a.createElement("input",{type:"text",name:"urlYouTuBe",placeholder:"LinkYouTuBe",value:this.state.urlYouTuBe,onChange:this.handleChange})),n.a.createElement("button",{id:"submit"},"Submit!")):n.a.createElement("div",null,n.a.createElement("section",{id:"meo"},n.a.createElement("form",{onSubmit:this.showAnswers},n.a.createElement("label",null,n.a.createElement("div",{className:"select"},n.a.createElement("select",{name:"slct",id:"slct",value:this.state.value,onChange:this.handleSelectChange},n.a.createElement("option",{value:"default"},"Choose an option"),n.a.createElement("option",{value:"showanswer"},"Show Answers"),n.a.createElement("option",{value:"showbutton"},"Show Buttons"),n.a.createElement("option",{value:"usmale"},"US English Male Voice"),n.a.createElement("option",{value:"usfemale"},"US English FeMale Voice"),n.a.createElement("option",{value:"ukmale"},"UK English Male Voice"),n.a.createElement("option",{value:"ukfemale"},"UK English FeMale Voice")))))),n.a.createElement("p",{className:"Hangman-btns"},e)))}}]),t}(s.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[22,1,2]]]);
//# sourceMappingURL=main.56c7a310.chunk.js.map